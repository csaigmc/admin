(this["webpackJsonpcsaigmc-frontend"]=this["webpackJsonpcsaigmc-frontend"]||[]).push([[2],{100:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n(0),c=n.n(r),i=n(14),o=(n(72),function(e){return"undefined"!==e&&null!==e&&""!==e&&"string"===typeof e}),s=n(24),u=n(12),l=n.n(u),m=n(27),p=n(57),d=n.n(p),g=n(40),f=n(54),b=n(203),E=n(153),h=n(60),v=n(214),O=n(67),y=n(208),j=n(71),w=n(195),x=Object(O.a)((function(e){return{heading:{color:e.palette.primary.main}}}));t.default=function(){console.log("inside login");var e=Object(j.a)(),t=(x(),Object(r.useState)("")),n=Object(a.a)(t,2),u=n[0],p=n[1],O=Object(r.useState)(""),k=Object(a.a)(O,2),L=k[0],A=k[1],S=Object(r.useState)(""),R=Object(a.a)(S,2),_=R[0],P=R[1],T=Object(s.a)().login,C=Object(f.a)(),B=C.getItem,N=C.setItem,I=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(r.useState)(t),c=Object(a.a)(n,2),i=c[0],o=c[1],s=Object(r.useState)(null),u=Object(a.a)(s,2),p=u[0],f=u[1],b=Object(r.useState)(null),E=Object(a.a)(b,2),h=E[0],v=E[1];Object(r.useEffect)((function(){!0===i&&O()}),[i]);var O=function(){var t=Object(m.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e){t.next=5;break}return o(!1),f(null),v("Token Not Found"),t.abrupt("return");case 5:return t.prev=5,t.next=8,d.a.post([g.a,"user","verify"].join("/"),null,{headers:{Authorization:"Bearer ".concat(e)}});case 8:n=t.sent,f(n),o(!1),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),v(t.t0.message),o(!1);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(){return t.apply(this,arguments)}}();return{loading:i,data:p,error:h,setLoading:o}}(B("authToken"),!0);Object(r.useEffect)((function(){!1===I.loading&&null!==I.data&&null!==I.data.data&&null!==I.data.data.auth_token&&(T(I.data.data),Object(i.navigate)("/"))}),[I.loading]);var U=function(e){var t=e.user,n=e.defLoadState,c=Object(r.useState)(n),i=Object(a.a)(c,2),o=i[0],s=i[1],u=Object(r.useState)(null),p=Object(a.a)(u,2),f=p[0],b=p[1],E=Object(r.useState)(null),h=Object(a.a)(E,2),v=h[0],O=h[1];Object(r.useEffect)((function(){!0===o&&y()}),[o]);var y=function(){var e=Object(m.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post([g.a,"user","login"].join("/"),{username:t.username,password:t.password});case 3:n=e.sent,b(n),s(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),O(e.t0.message),s(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return{loading:o,data:f,error:v,setLoading:s}}({user:{username:u,password:L},defLoadState:!1}),D=U.loading,z=U.data,M=U.error,W=U.setLoading;Object(r.useEffect)((function(){!1===D&&(null!==z?(T(z.data),N("authToken",z.data.auth_token),Object(i.navigate)("/")):null!==M&&P("username/password is incorrect!"))}),[D]);var F=function(e){e.preventDefault(),P(""),o(u)&&o(L)?W(!0):o(u)?P("password is empty"):o(L)?P("username is empty"):P("username/password are empty")};return c.a.createElement(b.a,{container:!0,justify:"center",alignItems:"center",style:{height:"100vh"}},c.a.createElement(b.a,{item:!0},c.a.createElement(E.a,{style:{overflow:"hidden"}},D?c.a.createElement(w.a,{disabled:!0}):null,c.a.createElement(b.a,{container:!0,className:"".concat(e.px2," ").concat(e.py2)},c.a.createElement(b.a,{item:!0,xs:12,style:{textAlign:"center"}},c.a.createElement(h.a,{variant:"h6",color:"primary"},"Admin Login")),c.a.createElement(b.a,{item:!0,xs:12,className:"".concat(e.pt1)},o(_)?c.a.createElement(h.a,{color:"error",variant:"caption"},_):null,c.a.createElement("form",{onSubmit:F},c.a.createElement(v.a,{className:"".concat(e.pb1),fullWidth:!0,label:"Username",name:"username",placeholder:"Username",value:u,onChange:function(e){return p(e.target.value)}}),c.a.createElement(v.a,{fullWidth:!0,label:"Password",name:"password",type:"password",placeholder:"Password",value:L,onChange:function(e){return A(e.target.value)}}),c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement(y.a,{variant:"contained",color:"primary",className:"".concat(e.mt2),onClick:F},"Submit"))))))))}},103:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n.n(a),c=(n(129),function(){return r.a.createElement("h1",{className:"bg-info text-center"},"Loading")})},110:function(e,t,n){e.exports=n(152)},115:function(e,t,n){},116:function(e,t,n){},128:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=128},129:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),i=n.n(c),o=(n(115),n(116),n(14)),s=n(12),u=n.n(s),l=n(27),m=n(24),p=Object(a.lazy)(Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(0),n.e(9)]).then(n.bind(null,326));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),d=Object(a.lazy)(Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(0),n.e(11)]).then(n.bind(null,335));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),g=Object(a.lazy)(Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(0),n.e(12)]).then(n.bind(null,336));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),f=Object(a.lazy)(Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(15).then(n.bind(null,345));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),b=Object(a.lazy)(Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(null,100));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),E=Object(a.lazy)(Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,337));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),h=Object(a.lazy)(Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.bind(null,338));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),v=Object(a.lazy)(Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,339));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),O={"/admin/complaints":function(){return r.a.createElement(p,null)},"/admin/clubs*":function(){return r.a.createElement(f,null)},"/admin/students":function(){return r.a.createElement(g,null)},"/admin/notifications":function(){return r.a.createElement(d,null)},"/admin/login":function(){return r.a.createElement(b,null)},"/admin/members":function(){return r.a.createElement(E,null)},"/admin/gallery":function(){return r.a.createElement(h,null)},"/admin/advisory":function(){return r.a.createElement(v,null)}},y=n(90),j=n(15),w=(n(72),n(103),n(54)),x=n(190),k=n(192),L=n(193),A=n(194),S=n(60),R=n(195),_=n(213),P=n(197),T=n(198),C=n(199),B=n(200),N=n(201),I=n(202),U=n(67),D=Object(U.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},iconStyle:{color:e.palette.common.white},title:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},nested:{paddingLeft:e.spacing(4)},dummyLoader:{background:e.palette.primary.main}}})),z={"/admin/gallery":"Gallery","/admin/advisory":"CSA Advisory","/admin/complaints":"Complaints","/admin/students":"Students","/admin/notifications":"Notifications","/admin/clubs/enigma":"Enigma","/admin/clubs/isis":"ISIS","/admin/clubs/memersclub":"Memers Club","/admin/clubs/arts":"Arts","/admin/members":"CSA Members"},M=function(){var e=D(),t=Object(o.usePath)(),n=Object(m.b)().loading,c=Object(m.a)().logout,i=Object(w.a)().removeItem,s=Object(a.useState)(!1),u=Object(j.a)(s,2),l=u[0],p=u[1],d=Object(a.useState)(!1),g=Object(j.a)(d,2),f=g[0],b=g[1];return r.a.createElement("header",null,r.a.createElement(x.a,{position:"static"},r.a.createElement(k.a,null,r.a.createElement(L.a,{"aria-label":"drawer-toggle",onClick:function(){return b(!0)}},r.a.createElement(A.a,{className:e.iconStyle},"menu")),r.a.createElement(S.a,{variant:"h6",className:e.title},function(e){var t=z[e];return null===typeof t?"Unknown":t}(t))),n?r.a.createElement(R.a,{position:"static"}):r.a.createElement("div",{className:e.dummyLoader,style:{width:"100%",height:"4px"}})),r.a.createElement(_.a,{open:f,onClose:function(){return b(!1)}},r.a.createElement(P.a,{component:"nav","aria-labelledby":"menu",subheader:r.a.createElement(T.a,{component:"div",id:"menu"},"Menu"),className:e.root},r.a.createElement(C.a,null),r.a.createElement(B.a,{button:!0,href:"/admin/members",component:o.A},r.a.createElement(N.a,{primary:"CSA Members"})),r.a.createElement(B.a,{button:!0,href:"/admin/advisory",component:o.A},r.a.createElement(N.a,{primary:"CSA Advisory"})),r.a.createElement(B.a,{button:!0,href:"/admin/gallery",component:o.A},r.a.createElement(N.a,{primary:"Gallery"})),r.a.createElement(B.a,{button:!0,href:"/admin/complaints",component:o.A},r.a.createElement(N.a,{primary:"Complaints"})),r.a.createElement(B.a,{button:!0,href:"/admin/students",component:o.A},r.a.createElement(N.a,{primary:"Students"})),r.a.createElement(B.a,{button:!0,href:"/admin/notifications",component:o.A},r.a.createElement(N.a,{primary:"Notifications"})),r.a.createElement(B.a,{button:!0,onClick:function(){p(!l)}},r.a.createElement(N.a,{primary:"Clubs"}),r.a.createElement(A.a,null,l?"expand_less":"expand_more")),r.a.createElement(I.a,{in:l,timeout:"auto"},r.a.createElement(P.a,{component:"div",disablePadding:!0},r.a.createElement(B.a,{className:e.nested,button:!0,href:"/admin/clubs/enigma",component:o.A},r.a.createElement(N.a,{primary:"Enigma"})),r.a.createElement(B.a,{className:e.nested,button:!0,href:"/admin/clubs/isis",component:o.A},r.a.createElement(N.a,{primary:"ISIS"})),r.a.createElement(B.a,{className:e.nested,button:!0,href:"/admin/clubs/memersclub",component:o.A},r.a.createElement(N.a,{primary:"Memers Club"})),r.a.createElement(B.a,{className:e.nested,button:!0,href:"/admin/clubs/arts",component:o.A},r.a.createElement(N.a,{primary:"Arts"})))),r.a.createElement(C.a,null),r.a.createElement(B.a,{button:!0,onClick:function(){return c(),i("authToken"),void Object(o.navigate)("/")}},r.a.createElement(N.a,{primary:"Logout"})))))},W=n(100),F=n(99),V=n(158),G=n(40),J=n(210),q=n(209);var $,H=($=function(){Object(o.useRedirect)("/","/admin/students");var e=Object(o.useRoutes)(O),t=Object(m.a)().user.auth_token,n=new F.a({uri:[G.a,"graphql"].join("/"),headers:{Authorization:"Bearer ".concat(t)}});return r.a.createElement(a.Fragment,null,r.a.createElement(M,null),r.a.createElement(V.a,{client:n},r.a.createElement(q.a,null,r.a.createElement(J.a,null),r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},e||r.a.createElement(y.a,null)))))},function(e){var t=Object(m.a)().loggedIn;return console.log("log Status:"+t),!0===t?r.a.createElement($,e):(Object(o.navigate)("/admin/login",!0),r.a.createElement(W.default,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(m.a.Provider,null,r.a.createElement(m.b.Provider,null,r.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return g}));var a=n(15),r=n(0),c=n(66),i="loading",o="login",s="logout",u="user_details",l={user:{auth_token:""},loggedIn:!1,error:null},m=function(e,t){switch(t.type){case o:return{user:{auth_token:t.user.auth_token},loggedIn:!0};case s:return{user:{auth_token:""},loggedIn:!1};default:return e}},p=function(e,t){switch(console.log(t.type),t.type){case i:return t.loading;default:throw new Error("Unspecified type for loading!")}},d=Object(c.a)((function(){var e=Object(r.useReducer)(m,l),t=Object(a.a)(e,2),n=t[0],c=t[1],i=n.user,p=n.loggedIn;return{user:i,loggedIn:p,login:function(e){!1===p&&(console.log("logging in.."),c({type:o,user:e}))},logout:function(){!0===p&&(console.log("logging out.."),c({type:s}))},setUserDetails:function(e){1==p&&c({type:u,user:e})}}})),g=Object(c.a)((function(){var e=Object(r.useReducer)(p,!1),t=Object(a.a)(e,2),n=t[0],c=t[1],o=n;return{loading:o,setLoading:function(e){console.log("trying set loading to => "+e),o!==e&&c({type:i,loading:e})}}}))},40:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var a,r="dev",c="prod",i=c===r,o=(a="BASE_URL",c===r?Object({NODE_ENV:"production",PUBLIC_URL:"/admin",REACT_APP_MODE:"prod",REACT_APP_PROD_BASE_URL:"https://csaigmc-backend.herokuapp.com"})["REACT_APP_DEV_".concat(a)]:Object({NODE_ENV:"production",PUBLIC_URL:"/admin",REACT_APP_MODE:"prod",REACT_APP_PROD_BASE_URL:"https://csaigmc-backend.herokuapp.com"})["REACT_APP_PROD_".concat(a)])},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(){return{getItem:function(e){return window.localStorage.getItem(e)},setItem:function(e,t){window.localStorage.setItem(e,t)},removeItem:function(e){window.localStorage.removeItem(e)}}}},71:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(67),r=Object(a.a)((function(e){return{px1:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},px2:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},px3:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)},px4:{paddingLeft:e.spacing(4),paddingRight:e.spacing(4)},py1:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},py2:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},py3:{paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},py4:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},pr1:{paddingRight:e.spacing(1)},pr2:{paddingRight:e.spacing(2)},pr3:{paddingRight:e.spacing(3)},pr4:{paddingRight:e.spacing(4)},pl1:{paddingLeft:e.spacing(1)},pl2:{paddingLeft:e.spacing(2)},pl3:{paddingLeft:e.spacing(3)},pl4:{paddingLeft:e.spacing(4)},pt1:{paddingTop:e.spacing(1)},pt2:{paddingTop:e.spacing(2)},pt3:{paddingTop:e.spacing(3)},pt4:{paddingTop:e.spacing(4)},pb1:{paddingBottom:e.spacing(1)},pb2:{paddingBottom:e.spacing(2)},pb3:{paddingBottom:e.spacing(3)},pb4:{paddingBottom:e.spacing(4)},mx1:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},mx2:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},mx3:{marginLeft:e.spacing(3),marginRight:e.spacing(3)},mx4:{marginLeft:e.spacing(4),marginRight:e.spacing(4)},my1:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},my2:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},my3:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},my4:{marginTop:e.spacing(4),marginBottom:e.spacing(4)},mr1:{marginRight:e.spacing(1)},mr2:{marginRight:e.spacing(2)},mr3:{marginRight:e.spacing(3)},mr4:{marginRight:e.spacing(4)},ml1:{marginLeft:e.spacing(1)},ml2:{marginLeft:e.spacing(2)},ml3:{marginLeft:e.spacing(3)},ml4:{marginLeft:e.spacing(4)},mt1:{marginTop:e.spacing(1)},mt2:{marginTop:e.spacing(2)},mt3:{marginTop:e.spacing(3)},mt4:{marginTop:e.spacing(4)},mb1:{marginBottom:e.spacing(1)},mb2:{marginBottom:e.spacing(2)},mb3:{marginBottom:e.spacing(3)},mb4:{marginBottom:e.spacing(4)}}}))},72:function(e,t,n){},90:function(e,t,n){"use strict";var a=n(0),r=n.n(a);n.d(t,"a",(function(){return i}));var c,i=(c=function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 text-center"},"404 ",r.a.createElement("br",null),"Page Not Found!"))},function(e){return r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(c,e))})}},[[110,3,4]]]);
//# sourceMappingURL=main.3b03d9f4.chunk.js.map